!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue-demi"),require("diacritics")):"function"==typeof define&&define.amd?define(["vue-demi","diacritics"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).VueWordHighlighter=t(e.VueDemi,e.diacritics)}(this,(function(e,t){"use strict";const i=e=>e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),s=e=>{let t;if(e.query instanceof RegExp)return new RegExp(String.raw`(${e.query.source})`,"g"+(e.caseSensitive?"":"i"));const s=(e=>{if("partial"===e)return e=>i(e);{const e=String.raw`[\s/(\[{<'"|（『「\u3000]`,t=String.raw`[.,\s/)\]}>:;'"!?|）』」。、\u3000]`;return s=>String.raw`(?<=^|${e})${i(s)}(?=$|${t})`}})(e.matchMode);if(e.splitBySpace){const i=e.query.trim().replace(/\s+/g," ");t=String.raw`(${i.split(/\s/).map(s).join("|")})`}else t=String.raw`(${s(e.query)})`;return new RegExp(String.raw`${t}`,"g"+(e.caseSensitive?"":"i"))},r=(i,r,h=!1)=>{if(!r.query||r.query instanceof String&&!r.query.trim())return i;let a=i,l=r.query,g=!1;r.diacriticsSensitive||(a=t.remove(a),l=r.query instanceof RegExp?new RegExp(t.remove(r.query.source)):t.remove(r.query),g=a!==i);const n=s({query:l,splitBySpace:r.splitBySpace,caseSensitive:r.caseSensitive,matchMode:r.matchMode}),c=a.split(n),p=g?((e,t)=>{const i=[];return t.forEach((t=>{const s=i.join("").length,r=s+t.length;i.push(e.slice(s,r))})),i})(i,c):c;return h?c.map(((e,t)=>{if(n.test(e)){const e=r.highlightClass?` class="${r.highlightClass}"`:"",i=r.highlightStyle?` style="${r.highlightStyle}"`:"";return`<${r.highlightTag}${e}${i}>${p[t]}</${r.highlightTag}>`}return p[t]})).join(""):c.map(((t,i)=>n.test(t)?e.h(r.highlightTag,{class:r.highlightClass,style:r.highlightStyle},p[i]):p[i]))},h=e=>Array.isArray(e.children)?e.children.map(h).join(""):e.children??"",a=t=>"string"==typeof t?[]:t.filter((e=>"string"!=typeof e)).map((t=>"string"==typeof t?t:e.isVue3?t.children:t.children[0].text));return e.install(),e.defineComponent({name:"VueWordHighlighter",props:{query:{type:[String,RegExp],required:!0,default:""},caseSensitive:{type:Boolean,default:!1},diacriticsSensitive:{type:Boolean,default:!1},splitBySpace:{type:Boolean,default:!1},matchMode:{type:String,default:"partial"},highlightClass:{type:[Object,String,Array],default:""},highlightStyle:{type:[Object,String,Array],default:""},highlightTag:{type:String,default:"mark"},wrapperTag:{type:String,default:"span"},wrapperClass:{type:[Object,String,Array],default:""},textToHighlight:{type:String,default:""},htmlToHighlight:{type:String,default:""}},emits:["matches"],setup:(t,i)=>()=>{if(t.htmlToHighlight){if(!e.isVue3)throw new Error("htmlToHighlight prop is only supported in Vue 3");const i="(<(?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])+>)",s=t.htmlToHighlight.split(new RegExp(i,"gs")),h=s.map(((e,h)=>new RegExp(i).test(e)||h>0&&s[h-1].startsWith("<script")?e:r(e,{query:t.query,splitBySpace:t.splitBySpace,caseSensitive:t.caseSensitive,diacriticsSensitive:t.diacriticsSensitive,matchMode:t.matchMode,highlightTag:t.highlightTag,highlightClass:t.highlightClass,highlightStyle:t.highlightStyle},!0))).join("");return e.h(t.wrapperTag,{class:t.wrapperClass,innerHTML:h})}if(t.textToHighlight){const s=r(t.textToHighlight,{query:t.query,splitBySpace:t.splitBySpace,caseSensitive:t.caseSensitive,diacriticsSensitive:t.diacriticsSensitive,matchMode:t.matchMode,highlightTag:t.highlightTag,highlightClass:t.highlightClass,highlightStyle:t.highlightStyle});return i.emit("matches",a(s)),e.h(t.wrapperTag,{class:t.wrapperClass},s)}if(!e.isVue3){const s=(t=>{if(t&&t.default){const i=t.default();let s;return s=e.isVue3?h(i[0]):i[0].text,"string"==typeof s?s:("production"!==process.env.NODE_ENV&&console.warn("Slots should be text only"),"")}return""})(i.slots),l=r(s,{query:t.query,splitBySpace:t.splitBySpace,caseSensitive:t.caseSensitive,diacriticsSensitive:t.diacriticsSensitive,matchMode:t.matchMode,highlightTag:t.highlightTag,highlightClass:t.highlightClass,highlightStyle:t.highlightStyle});return i.emit("matches",a(l)),e.h(t.wrapperTag,{class:t.wrapperClass},l)}if(i.slots&&i.slots.default){const s=h=>{if(h.type===e.Comment)return h;if("string"==typeof h.children){const s=r(h.children,{query:t.query,splitBySpace:t.splitBySpace,caseSensitive:t.caseSensitive,diacriticsSensitive:t.diacriticsSensitive,matchMode:t.matchMode,highlightTag:t.highlightTag,highlightClass:t.highlightClass,highlightStyle:t.highlightStyle}),l=a(s);return i.emit("matches",l),0===l.length?h:"string"==typeof h.type?e.h(h.type,{...h.props},[e.h(t.wrapperTag,{class:t.wrapperClass},s)]):e.h(t.wrapperTag,{class:t.wrapperClass},s)}return e.h(h.type,{...h.props},Array.isArray(h.children)?h.children.map((e=>s(e))):[])},h=i.slots.default();return Array.isArray(h)?h.map((e=>s(e))):h}}})}));//# sourceMappingURL=vue-word-highlighter.global.js.map
